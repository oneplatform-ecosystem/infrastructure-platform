components:
  terraform:
    azure-aks:
      metadata:
        component: azure-aks
        type: service

      settings:
        # Spacelift settings can be added here if needed
        spacelift:
          workspace_enabled: true

      vars:
        # Enable/disable the component
        enabled: true

        # Naming configuration
        # name will be set in stack configuration
        # attributes can be set per instance (e.g., ["prod"], ["dev"])
        delimiter: ""

        # Basic AKS Configuration
        add_random_suffix: false
        kubernetes_version: null  # Use latest stable version
        sku_tier: "Free"
        dns_prefix: null  # Will use cluster name if not provided
        node_resource_group: null  # Auto-generated by Azure

        # Private Cluster Configuration
        private_cluster_enabled: false
        private_dns_zone_id: null
        private_cluster_public_fqdn_enabled: false
        api_server_access_profile: null

        # Default Node Pool Configuration
        default_node_pool:
          name: "system"
          vm_size: "Standard_D2s_v3"
          vnet_subnet_id: null  # Must be provided in stack config
          zones: ["1", "2", "3"]
          enable_auto_scaling: true
          enable_host_encryption: false
          enable_node_public_ip: false
          max_pods: 30
          node_labels: {}
          node_taints: []
          only_critical_addons_enabled: false
          orchestrator_version: null
          os_disk_size_gb: 100
          os_disk_type: "Managed"
          os_sku: "Ubuntu"
          pod_subnet_id: null
          scale_down_mode: "Delete"
          type: "VirtualMachineScaleSets"
          ultra_ssd_enabled: false
          node_count: 3
          min_count: 3
          max_count: 6
          upgrade_settings:
            max_surge: "33%"

        # Additional Node Pools
        additional_node_pools: {}

        # Identity Configuration
        identity_type: "SystemAssigned"
        identity_ids: []

        # Network Configuration
        network_profile:
          network_plugin: "azure"
          network_mode: null
          network_policy: "azure"
          dns_service_ip: "10.100.0.10"
          service_cidr: "10.100.0.0/16"
          pod_cidr: null
          outbound_type: "loadBalancer"
          load_balancer_sku: "standard"
          load_balancer_profile: null

        # Azure AD RBAC
        azure_ad_rbac: null
        role_based_access_control_enabled: true
        local_account_disabled: false

        # Auto Scaler Profile
        auto_scaler_profile: null

        # Monitoring
        oms_agent: null

        # Add-ons
        azure_policy_enabled: false
        http_application_routing_enabled: false

        # Key Vault Secrets Provider
        key_vault_secrets_provider: null

        # Kubelet Identity
        kubelet_identity: null

        # Linux Profile (SSH access)
        linux_profile: null

        # Windows Profile (for Windows node pools)
        windows_profile: null

        # Maintenance Window
        maintenance_window: null

        # Upgrade Configuration
        automatic_channel_upgrade: null
        node_os_channel_upgrade: null

        # Image Cleaner
        image_cleaner_enabled: false
        image_cleaner_interval_hours: 48

        # Workload Identity
        workload_identity_enabled: false
        oidc_issuer_enabled: false

        # Security
        disk_encryption_set_id: null
        run_command_enabled: true

        # Storage Profile
        storage_profile: null

        # Tags (will be merged with label module tags)
        tags:
          ManagedBy: "Terraform"
          Component: "azure-aks"
